<!DOCTYPE html>
<html lang="en-US" class="no-js">
	
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		
		<title>
			   Dynamic Navigation using SiteMesh | Gilluminate - By Jason Gill 
		</title>
				
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
				
		
		

		
		
		
  		
  		<link rel="stylesheet/less" type="text/css" href="/contents/ui/wordpress-bootstrap/less/bootstrap.less">
  		<link rel="stylesheet/less" type="text/css" href="/contents/ui/wordpress-bootstrap/less/responsive.less">

		
		
<link rel="stylesheet" id="wp-block-library-css" href="/inc/css/dist/block-library/style.min.css?ver=5.5.1" type="text/css" media="all">
<link rel="stylesheet" id="wp-syntax-css-css" href="/contents/plugins/wp-syntax/css/wp-syntax.css?ver=1.1" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap-css" href="/contents/ui/wordpress-bootstrap/library/css/bootstrap.css?ver=1.0" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap-responsive-css" href="/contents/ui/wordpress-bootstrap/library/css/responsive.css?ver=1.0" type="text/css" media="all">
<link rel="stylesheet" id="wp-bootstrap-css" href="/contents/ui/wordpress-bootstrap/style.css?ver=1.0" type="text/css" media="all">
<link rel="stylesheet" id="fancybox-css" href="/contents/plugins/easy-fancybox/css/jquery.fancybox.min.css?ver=1.3.24" type="text/css" media="screen">
<script type="text/javascript" src="/inc/js/jquery/jquery.js?ver=1.12.4-wp" id="jquery-core-js"></script>
<script type="text/javascript" src="/contents/ui/wordpress-bootstrap/library/js/bootstrap.min.js?ver=1.2" id="bootstrap-js"></script>
<script type="text/javascript" src="/contents/ui/wordpress-bootstrap/library/js/scripts.js?ver=1.2" id="wpbs-scripts-js"></script>
<script type="text/javascript" src="/contents/ui/wordpress-bootstrap/library/js/modernizr.full.min.js?ver=1.2" id="modernizr-js"></script>
<script type="text/javascript" src="/contents/plugins/google-analyticator/external-tracking.min.js?ver=6.5.4" id="ga-external-tracking-js"></script>
<link rel="canonical" href="https://gilluminate.com/2006/01/11/dynamic-navigation-using-sitemesh/">



<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #ffffff; }
</style>
	
<script type="text/javascript">
    var analyticsFileTypes = [''];
    var analyticsSnippet = 'disabled';
    var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-73622-1', 'auto');
 
	ga('send', 'pageview');
</script>
		

		
		<style>
        #main article {
          border-bottom: none;
        }
        </style>		
				<link rel="stylesheet" href="/contents/ui/gilluminate-bootstrap/style.css" type="text/css" media="screen">
		
			</head>
	
	<body class="post-template-default single single-post postid-21 single-format-standard custom-background">
				
		<header role="banner">
		
			<div id="inner-header" class="clearfix">
				
				<div class="navbar navbar-fixed-top">
					<div class="navbar-inner">
						<div class="container-fluid nav-container">
							<nav role="navigation">
								<a class="brand" id="logo" title="By Jason Gill" href="/">Gilluminate</a>
								
								<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							        <span class="icon-bar"></span>
							        <span class="icon-bar"></span>
							        <span class="icon-bar"></span>
								</a>
								
								<div class="nav-collapse">
									<ul id="menu-top-menu" class="nav"><li id="menu-item-6569" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent"><a href="/developer-blog/">Developer Blog</a></li>
</ul>								</div>
								
							</nav>
							
														
						</div>
					</div>
				</div>
			
			</div> 
		
		</header> 
		
		<div class="container-fluid">
			
			<div id="content" class="clearfix row-fluid">
			
				<div id="main" class="span8 clearfix" role="main">

										
					<article id="post-21" class="clearfix post-21 post type-post status-publish format-standard hentry category-tech tag-appfuse tag-sitemesh" role="article" itemscope itemtype="http://schema.org/BlogPosting">
						
						<header>
						
														
							<div class="page-header"><h1 class="single-title" itemprop="headline">Dynamic Navigation using SiteMesh</h1></div>
							
							<p class="meta">Posted <time datetime="2006-01-11" pubdate>January 11, 2006</time> by <a href="/author/petethechop/" title="Posts by Jason Gill" rel="author">Jason Gill</a> <span class="amp">&amp;</span> filed under <a href="/topic/tech/" rel="category tag">Developer Blog</a>.</p>
						
						</header> 
					
						<section class="post_content clearfix" itemprop="articleBody">
							<p class="lead">We&rsquo;ve started using <a href="http://www.opensymphony.com/sitemesh/">SiteMesh</a> at my workplace. I have really fallen in love with SiteMesh, and I feel it has many advantages. We actually started using it because it is integrated into <a href="http://raibledesigns.com/wiki/Wiki.jsp?page=AppFuse">AppFuse</a>.</p>
<p>Although I love SiteMesh one of my biggest complaints was that I couldn&rsquo;t use a dynamic navigation, which highlights the link for the page I&rsquo;m currently visiting. At least not without creating a new <a href="http://www.opensymphony.com/sitemesh/decorators.html">decorator</a> for each page; but then, what would be the point of using SiteMesh at all!?</p>
<p>However, the problem wasn&rsquo;t SiteMesh, the problem was the SiteMesh Documentation&rsquo;s lack of good examples and explainations on how to use the darn thing. Which is why I&rsquo;m posting this blog now; hopefully enough people using SiteMesh will start documenting new ways to use it (or old ways undocumented) so that more information is available to those of us who are not Java programmers and can&rsquo;t decipher all of the documentation available.</p>
<p>The Problem:</p>
<p>In order to create a dynamic navigation, which highlights the page you are currently visiting, you need to have the page being decorated tell the decorator which page it&rsquo;s decorating. You also need to set up the navigation to say "if I&rsquo;m on page A, highlight link A" or in other words, "if I&rsquo;m on page A, set the css class for link A to a different class than the rest of the links." What I had a hard time figuring out was how to pass that information from the page to the decorator in a useful format.  To those of you saying, "well couldn&rsquo;t you already pass variables using the <a href="http://www.opensymphony.com/sitemesh/tags.html#decorator:getProperty">&lt;decorator:getProperty /&gt;</a> tag?" the answer is "yes." But, what you can&rsquo;t do with &lt;decorator:getProperty /&gt; is stick it inside a jsp <em>if/then</em> statement on your decorator.</p>
<p>The Solution: </p>
<p>After much trial and error (my <em>favorite</em> way to code),  and after much google searching. I finally figured out how you can use <strong>meta tags</strong> to pass variables from the page being decorated, to the decorator. Then rather than using &lt;decorator:getProperty&gt; tag, you use the <a href="http://www.opensymphony.com/sitemesh/tags.html#decorator:usePage">&lt;decorator:usePage /&gt;</a> tag. Here&rsquo;s where the example from the documentation is poor at best. With my miniscuel knowledge of Java, I believe that the example assumes that the property "rating" has been set using java or even jsp somewhere in the page. But I&rsquo;m trying to decorate static HTML files using a jsp decorator. I can&rsquo;t just set a property.</p>
<p>In the <a href="http://forums.opensymphony.com/thread.jspa?messageID=5270">OpenSymphony Forum</a>  I stumbled upon the answer. Not that this thread of discussion was about how to set up your navigation, but it gave me a clue into how to use the Meta tags to pass information to the decorator.</p>
<p>First I need to set up my meta tag in the page being decorated:</p>
<p class="box"> &lt;meta name="currentPage" content="About Us"/&gt;</p>
<p>The next thing to do is capture that information in my decorator using the &lt;decorator:usePage /&gt; tag along with some jsp code:</p>
<p class="box">&lt;decorator:usePage id="thePage" /&gt;<br>
	&lt;% String pageName = thePage.getProperty("meta.currentPage");%&gt;<br>
	&lt;!&ndash;&lt;%= pageName %&gt;&ndash;&gt; </p>
<p>The ID you give the page doesn&rsquo;t matter, as long as you use the same ID in your jsp. I&rsquo;ve added an HTML commented output of the pageName, now when you view the source from your browser you can see exactly which page is being decorated. In this case the comment would look like this:</p>
<p class="box">&lt;!&ndash;About Us&ndash;&gt;</p>
<p>Now all you need to do is set up your navigation to look something like this:</p>
<p class="box"> &lt;div id="navigation"&gt;<br>
&nbsp;&nbsp;&lt;ul&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li &lt;%if (pageName.equals("Home")) {%&gt;class="active"&lt;% } %&gt;&gt;&lt;a href="/"&gt;Home&lt;/a&gt;&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li &lt;%if (pageName.equals("About Us")) {%&gt;class="active"&lt;% } %&gt;&gt;&lt;a href="/"&gt;About Us &lt;/a&gt;&lt;/li&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;li &lt;%if (pageName.equals("Contact Us")) {%&gt;class="active"&lt;% } %&gt;&gt;&lt;a href="/"&gt;Contact Us&lt;/a&gt;&lt;/li&gt;<br>
&nbsp;&nbsp;&lt;/ul&gt;<br>
&lt;/div&gt; </p>
<p>In my AppFuse app, I was able to cut my three different decorators down to only one. Maintenance is now much easier and I still get to keep my dynamic navigation.</p>
							
												
						</section> 
						
						<footer>
			
							<p class="tags"><span class="tags-title">Tags:</span> <a href="/tag/appfuse/" rel="tag">AppFuse</a> <a href="/tag/sitemesh/" rel="tag">SiteMesh</a></p>							
														
						</footer> 
					
					</article> 
					
										
								
					
								
				</div> 
    
								<div id="sidebar1" class="fluid-sidebar sidebar span4" role="complementary">
				
					
						<div id="text-10" class="widget widget_text">			<div class="textwidget"></div>
		</div>
					
				</div>    
			</div> 

			<footer role="contentinfo">
			
				<div id="inner-footer" class="clearfix">
		          <hr>
		          <div id="widget-footer" class="clearfix row-fluid">
		            		            		            		            		            		            		          </div>
					
					<nav class="clearfix">
											</nav>
			
					<p class="attribution pull-right">&copy; Gilluminate</p>
				
				</div> 
				
			</footer> 
		
		</div> 
				
		
		
		<script type="text/javascript" src="/contents/plugins/wp-syntax/js/wp-syntax.js?ver=1.1" id="wp-syntax-js-js"></script>
<script type="text/javascript" src="/contents/plugins/easy-fancybox/js/jquery.fancybox.min.js?ver=1.3.24" id="jquery-fancybox-js"></script>
<script type="text/javascript" id="jquery-fancybox-js-after">
var fb_timeout, fb_opts={'overlayShow':true,'hideOnOverlayClick':true,'showCloseButton':true,'margin':20,'centerOnScroll':true,'enableEscapeButton':true,'autoScale':true };
if(typeof easy_fancybox_handler==='undefined'){
var easy_fancybox_handler=function(){
jQuery('.nofancybox,a.wp-block-file__button,a.pin-it-button,a[href*="pinterest.com/pin/create"],a[href*="facebook.com/share"],a[href*="twitter.com/share"]').addClass('nolightbox');
/* IMG */
var fb_IMG_select='a[href*=".jpg"]:not(.nolightbox,li.nolightbox>a),area[href*=".jpg"]:not(.nolightbox),a[href*=".jpeg"]:not(.nolightbox,li.nolightbox>a),area[href*=".jpeg"]:not(.nolightbox),a[href*=".png"]:not(.nolightbox,li.nolightbox>a),area[href*=".png"]:not(.nolightbox),a[href*=".webp"]:not(.nolightbox,li.nolightbox>a),area[href*=".webp"]:not(.nolightbox)';
jQuery(fb_IMG_select).addClass('fancybox image');
var fb_IMG_sections=jQuery('.gallery,.wp-block-gallery,.tiled-gallery,.wp-block-jetpack-tiled-gallery');
fb_IMG_sections.each(function(){jQuery(this).find(fb_IMG_select).attr('rel','gallery-'+fb_IMG_sections.index(this));});
jQuery('a.fancybox,area.fancybox,li.fancybox a').each(function(){jQuery(this).fancybox(jQuery.extend({},fb_opts,{'transitionIn':'elastic','easingIn':'easeOutBack','transitionOut':'elastic','easingOut':'easeInBack','opacity':false,'hideOnContentClick':false,'titleShow':true,'titlePosition':'over','titleFromAlt':true,'showNavArrows':true,'enableKeyboardNav':true,'cyclic':false}))});};
jQuery('a.fancybox-close').on('click',function(e){e.preventDefault();jQuery.fancybox.close()});
};
var easy_fancybox_auto=function(){setTimeout(function(){jQuery('#fancybox-auto').trigger('click')},1000);};
jQuery(easy_fancybox_handler);jQuery(document).on('post-load',easy_fancybox_handler);
jQuery(easy_fancybox_auto);
</script>
<script type="text/javascript" src="/contents/plugins/easy-fancybox/js/jquery.easing.min.js?ver=1.4.1" id="jquery-easing-js"></script>
<script type="text/javascript" src="/contents/plugins/easy-fancybox/js/jquery.mousewheel.min.js?ver=3.1.13" id="jquery-mousewheel-js"></script>

	</body>

</html>
