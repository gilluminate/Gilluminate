<!DOCTYPE html>
<html lang="en-US" class="no-js">
	
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		
		<title>
			   Add a field to Contact Us form in Drupal | Gilluminate - By Jason Gill 
		</title>
				
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
				
		
		

		
		
		
  		
  		<link rel="stylesheet/less" type="text/css" href="https://gilluminate.com/wp-content/themes/wordpress-bootstrap/less/bootstrap.less">
  		<link rel="stylesheet/less" type="text/css" href="https://gilluminate.com/wp-content/themes/wordpress-bootstrap/less/responsive.less">

		
		
<link rel="stylesheet" id="wp-block-library-css" href="https://gilluminate.com/inc/css/dist/block-library/style.min.css?ver=5.5.1" type="text/css" media="all">
<link rel="stylesheet" id="wp-syntax-css-css" href="https://gilluminate.com/wp-content/plugins/wp-syntax/css/wp-syntax.css?ver=1.1" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap-css" href="https://gilluminate.com/wp-content/themes/wordpress-bootstrap/library/css/bootstrap.css?ver=1.0" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap-responsive-css" href="https://gilluminate.com/wp-content/themes/wordpress-bootstrap/library/css/responsive.css?ver=1.0" type="text/css" media="all">
<link rel="stylesheet" id="wp-bootstrap-css" href="https://gilluminate.com/wp-content/themes/wordpress-bootstrap/style.css?ver=1.0" type="text/css" media="all">
<link rel="stylesheet" id="fancybox-css" href="https://gilluminate.com/wp-content/plugins/easy-fancybox/css/jquery.fancybox.min.css?ver=1.3.24" type="text/css" media="screen">
<script type="text/javascript" src="https://gilluminate.com/inc/js/jquery/jquery.js?ver=1.12.4-wp" id="jquery-core-js"></script>
<script type="text/javascript" src="https://gilluminate.com/wp-content/themes/wordpress-bootstrap/library/js/bootstrap.min.js?ver=1.2" id="bootstrap-js"></script>
<script type="text/javascript" src="https://gilluminate.com/wp-content/themes/wordpress-bootstrap/library/js/scripts.js?ver=1.2" id="wpbs-scripts-js"></script>
<script type="text/javascript" src="https://gilluminate.com/wp-content/themes/wordpress-bootstrap/library/js/modernizr.full.min.js?ver=1.2" id="modernizr-js"></script>
<script type="text/javascript" src="https://gilluminate.com/wp-content/plugins/google-analyticator/external-tracking.min.js?ver=6.5.4" id="ga-external-tracking-js"></script>
<link rel="alternate" type="application/json" href="https://gilluminate.com/wp-json/wp/v2/posts/5268"><link rel="canonical" href="https://gilluminate.com/2008/03/04/add-a-field-to-contact-us-form-in-drupal/">

<link rel="alternate" type="application/json+oembed" href="https://gilluminate.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fgilluminate.com%2F2008%2F03%2F04%2Fadd-a-field-to-contact-us-form-in-drupal%2F">
<link rel="alternate" type="text/xml+oembed" href="https://gilluminate.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fgilluminate.com%2F2008%2F03%2F04%2Fadd-a-field-to-contact-us-form-in-drupal%2F&amp;format=xml">
<style type="text/css" id="custom-background-css">
body.custom-background { background-color: #ffffff; }
</style>
	
<script type="text/javascript">
    var analyticsFileTypes = [''];
    var analyticsSnippet = 'disabled';
    var analyticsEventTracking = 'enabled';
</script>
<script type="text/javascript">
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-73622-1', 'auto');
 
	ga('send', 'pageview');
</script>
		

		
		<style>
        #main article {
          border-bottom: none;
        }
        </style>		
				<link rel="stylesheet" href="https://gilluminate.com/wp-content/themes/gilluminate-bootstrap/style.css" type="text/css" media="screen">
		
			</head>
	
	<body class="post-template-default single single-post postid-5268 single-format-standard custom-background">
				
		<header role="banner">
		
			<div id="inner-header" class="clearfix">
				
				<div class="navbar navbar-fixed-top">
					<div class="navbar-inner">
						<div class="container-fluid nav-container">
							<nav role="navigation">
								<a class="brand" id="logo" title="By Jason Gill" href="https://gilluminate.com">Gilluminate</a>
								
								<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
							        <span class="icon-bar"></span>
							        <span class="icon-bar"></span>
							        <span class="icon-bar"></span>
								</a>
								
								<div class="nav-collapse">
									<ul id="menu-top-menu" class="nav"><li id="menu-item-6569" class="menu-item menu-item-type-post_type menu-item-object-page current_page_parent"><a href="https://gilluminate.com/developer-blog/">Developer Blog</a></li>
</ul>								</div>
								
							</nav>
							
														
						</div>
					</div>
				</div>
			
			</div> 
		
		</header> 
		
		<div class="container-fluid">
			
			<div id="content" class="clearfix row-fluid">
			
				<div id="main" class="span8 clearfix" role="main">

										
					<article id="post-5268" class="clearfix post-5268 post type-post status-publish format-standard hentry category-tech tag-drupal" role="article" itemscope itemtype="http://schema.org/BlogPosting">
						
						<header>
						
														
							<div class="page-header"><h1 class="single-title" itemprop="headline">Add a field to Contact Us form in Drupal</h1></div>
							
							<p class="meta">Posted <time datetime="2008-03-4" pubdate>March 4, 2008</time> by <a href="https://gilluminate.com/author/petethechop/" title="Posts by Jason Gill" rel="author">Jason Gill</a> <span class="amp">&amp;</span> filed under <a href="https://gilluminate.com/topic/tech/" rel="category tag">Developer Blog</a>.</p>
						
						</header> 
					
						<section class="post_content clearfix" itemprop="articleBody">
							<p class="lead">I needed to add a checkbox to Drupal&rsquo;s Contact Us form for a client of mine. The client requested that I add a way for those filling out the form to request a newsletter. I discovered it&rsquo;s pretty easy to add a form field and get it added as part of the email that&rsquo;s sent. You just need to hack into the module on your server (sorry, no GUI for this). Here&rsquo;s what I did:</p>
<p>First, find the module file: </p>
<pre>modules/contact/contact.module</pre>
<p>If you prefer command line editing open up that file in your favorite editor. If you prefer the download/edit/upload approach via FTP that will work also. I assume if you have interest in this article, that you have some knowledge of either of those 2 methods. If not, I wonder how you set up Drupal in the first place.</p>
<p>Now that you are in edit mode, find a chunk of code that talks about not allowing anonymous users to send themselves a copy for spam reasons. Found that comment? Good, now just above it you are going to add your field. I found it easy to copy/paste an existing form element and edit it&rsquo;s contents, but you can type it out if you like. Actually, feel free to copy/paste and edit my example below. Here&rsquo;s what I ended up with:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="php" style="font-family:monospace;"> <span style="color: #000088;">$form</span><span style="color: #009900;">[</span><span style="color: #0000ff;">'newsletter'</span><span style="color: #009900;">]</span> <span style="color: #339933;">=</span> <span style="color: #990000;">array</span><span style="color: #009900;">(</span><span style="color: #0000ff;">'#type'</span> <span style="color: #339933;">=&amp;</span>gt<span style="color: #339933;">;</span> <span style="color: #0000ff;">'checkbox'</span><span style="color: #339933;">,</span>
    <span style="color: #0000ff;">'#title'</span> <span style="color: #339933;">=&amp;</span>gt<span style="color: #339933;">;</span> t<span style="color: #009900;">(</span><span style="color: #0000ff;">'Sign me up for the Newsletter'</span><span style="color: #009900;">)</span><span style="color: #339933;">,</span>
  <span style="color: #009900;">)</span><span style="color: #339933;">;</span></pre></td></tr></table><p class="theCode" style="display:none;"> $form['newsletter'] = array('#type' =&amp;gt; 'checkbox',
    '#title' =&amp;gt; t('Sign me up for the Newsletter'),
  );</p></div>

<p>You may want to add a comment somewhere in there to remind yourself at a later date that this is no longer part of the original configuration.</p>
<p>That was easy, now I just need to tell it to add content to the email sent out so that when that box is checked, it actually does something! Next look for a chunk of comment code that looks like this:</p>
<pre lang="php" line="n">// Compose the body:</pre>
<p>below that you will find a couple lines that start with &ldquo;$message[] =&rdquo; which is where the body of the email&rsquo;s message gets created. Just add another line that says something like the following:</p>

<div class="wp_syntax" style="position:relative;"><table><tr><td class="code"><pre class="php" style="font-family:monospace;"> <span style="color: #b1b100;">if</span> <span style="color: #009900;">(</span><span style="color: #000088;">$form_values</span><span style="color: #009900;">[</span><span style="color: #0000ff;">'newsletter'</span><span style="color: #009900;">]</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">1</span><span style="color: #009900;">)</span> <span style="color: #009900;">{</span>
    <span style="color: #000088;">$message</span><span style="color: #009900;">[</span><span style="color: #009900;">]</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">"Yes, please send me a newsletter"</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">}</span> <span style="color: #b1b100;">else</span> <span style="color: #009900;">{</span>
    <span style="color: #000088;">$message</span><span style="color: #009900;">[</span><span style="color: #009900;">]</span> <span style="color: #339933;">=</span> <span style="color: #0000ff;">"No, please do not send me a newsletter"</span><span style="color: #339933;">;</span>
  <span style="color: #009900;">}</span></pre></td></tr></table><p class="theCode" style="display:none;"> if ($form_values['newsletter'] == 1) {
    $message[] = "Yes, please send me a newsletter";
  } else {
    $message[] = "No, please do not send me a newsletter";
  }</p></div>

<p>Now crank open your form and test it out. Assuming you are the recipient of the email being generated, you will get a nice extra piece of text at the bottom of the email with this new content based on the user&rsquo;s input.</p>
							
												
						</section> 
						
						<footer>
			
							<p class="tags"><span class="tags-title">Tags:</span> <a href="https://gilluminate.com/tag/drupal/" rel="tag">Drupal</a></p>							
														
						</footer> 
					
					</article> 
					
										
								
					
								
				</div> 
    
								<div id="sidebar1" class="fluid-sidebar sidebar span4" role="complementary">
				
					
						<div id="text-10" class="widget widget_text">			<div class="textwidget"></div>
		</div>
					
				</div>    
			</div> 

			<footer role="contentinfo">
			
				<div id="inner-footer" class="clearfix">
		          <hr>
		          <div id="widget-footer" class="clearfix row-fluid">
		            		            		            		            		            		            		          </div>
					
					<nav class="clearfix">
											</nav>
			
					<p class="attribution pull-right">&copy; Gilluminate</p>
				
				</div> 
				
			</footer> 
		
		</div> 
				
		
		
		<script type="text/javascript" src="https://gilluminate.com/wp-content/plugins/wp-syntax/js/wp-syntax.js?ver=1.1" id="wp-syntax-js-js"></script>
<script type="text/javascript" src="https://gilluminate.com/wp-content/plugins/easy-fancybox/js/jquery.fancybox.min.js?ver=1.3.24" id="jquery-fancybox-js"></script>
<script type="text/javascript" id="jquery-fancybox-js-after">
var fb_timeout, fb_opts={'overlayShow':true,'hideOnOverlayClick':true,'showCloseButton':true,'margin':20,'centerOnScroll':true,'enableEscapeButton':true,'autoScale':true };
if(typeof easy_fancybox_handler==='undefined'){
var easy_fancybox_handler=function(){
jQuery('.nofancybox,a.wp-block-file__button,a.pin-it-button,a[href*="pinterest.com/pin/create"],a[href*="facebook.com/share"],a[href*="twitter.com/share"]').addClass('nolightbox');
/* IMG */
var fb_IMG_select='a[href*=".jpg"]:not(.nolightbox,li.nolightbox>a),area[href*=".jpg"]:not(.nolightbox),a[href*=".jpeg"]:not(.nolightbox,li.nolightbox>a),area[href*=".jpeg"]:not(.nolightbox),a[href*=".png"]:not(.nolightbox,li.nolightbox>a),area[href*=".png"]:not(.nolightbox),a[href*=".webp"]:not(.nolightbox,li.nolightbox>a),area[href*=".webp"]:not(.nolightbox)';
jQuery(fb_IMG_select).addClass('fancybox image');
var fb_IMG_sections=jQuery('.gallery,.wp-block-gallery,.tiled-gallery,.wp-block-jetpack-tiled-gallery');
fb_IMG_sections.each(function(){jQuery(this).find(fb_IMG_select).attr('rel','gallery-'+fb_IMG_sections.index(this));});
jQuery('a.fancybox,area.fancybox,li.fancybox a').each(function(){jQuery(this).fancybox(jQuery.extend({},fb_opts,{'transitionIn':'elastic','easingIn':'easeOutBack','transitionOut':'elastic','easingOut':'easeInBack','opacity':false,'hideOnContentClick':false,'titleShow':true,'titlePosition':'over','titleFromAlt':true,'showNavArrows':true,'enableKeyboardNav':true,'cyclic':false}))});};
jQuery('a.fancybox-close').on('click',function(e){e.preventDefault();jQuery.fancybox.close()});
};
var easy_fancybox_auto=function(){setTimeout(function(){jQuery('#fancybox-auto').trigger('click')},1000);};
jQuery(easy_fancybox_handler);jQuery(document).on('post-load',easy_fancybox_handler);
jQuery(easy_fancybox_auto);
</script>
<script type="text/javascript" src="https://gilluminate.com/wp-content/plugins/easy-fancybox/js/jquery.easing.min.js?ver=1.4.1" id="jquery-easing-js"></script>
<script type="text/javascript" src="https://gilluminate.com/wp-content/plugins/easy-fancybox/js/jquery.mousewheel.min.js?ver=3.1.13" id="jquery-mousewheel-js"></script>

	</body>

</html>
